<!DOCTYPE html>
<html>
<body>
<div>
</div>
<script src="main.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.5.0/firebase-messaging.js"></script>

<p>Enter Your Phone Number to recive your unique QRcode</p>
<input type="text" id="uniqueID" value=""></input>
<button onclick="submit()">Submit</button>

<script>
var nameValue = "5";
function submit(){
    nameValue = document.getElementById("uniqueID").value;
    var messageListRef = firebase.database().ref('bob');
    var newMessageRef = messageListRef.push();
    newMessageRef.set({
       'user_number': nameValue
});
// We've appended a new message to the message_list location.

var path = newMessageRef.toString();
// path will be something like
// 'https://sample-app.firebaseio.com/message_list/-IKo28nwJLH0Nc5XeFmj'
//    var phone = nameValue;
//    firebase.database().ref('bob').push(phone);
//    var values = "+14013093454";
alert(nameValue);
alert(path);
document.getElementById("uniqueID").value = null;
relocate();
  };
</script>


<script>
  var config = {
    apiKey: "AIzaSyCXLWmoF_siEWeAEOZK7SaBBJdJx3A3Ang",
    authDomain: "textmewhenyouland.firebaseapp.com",
    databaseURL: "https://textmewhenyouland.firebaseio.com",
    projectId: "textmewhenyouland",
    storageBucket: "textmewhenyouland.appspot.com",
    messagingSenderId: "1049450517098"
  };
  firebase.initializeApp(config);

  var query = firebase.database().ref("bob").orderByKey();
  query.once("value")
    .then(function(snapshot) {
      snapshot.forEach(function(childSnapshot) {
        // key will be "ada" the first time and "alan" the second time
        var key = childSnapshot.key;
        // childData will be the actual contents of the child
        var childData = childSnapshot.val();
        console.log(childData.user_number);
    });
  });
function relocate(){
  var QRcode = "http://api.qrserver.com/v1/create-qr-code/?data=" + nameValue.toString() + "&size=100x100";
  window.location.replace(QRcode);
};

</script>
</body>

</html>
